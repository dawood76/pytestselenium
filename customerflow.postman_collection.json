{
	"info": {
		"_postman_id": "83e7e30a-e7cb-4fe1-a729-7d993f612375",
		"name": "customer flow",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "create_data",
			"item": [
				{
					"name": "create_super_admin",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "2ed65fe3-c6b0-4c8b-a4c2-0d582e8fc79e",
								"exec": [
									"adminEmail = pm.variables.replaceIn('{{$randomEmail}}')",
									"adminPassword = pm.variables.replaceIn('{{$randomPassword}}')",
									"console.log(adminEmail)",
									"pm.environment.set(\"adminEmail\", adminEmail);",
									"pm.environment.set(\"adminPassword\", adminPassword)"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"address\": \"12323\",\n    \"cnic\": \"123121113123\",\n    \"cnic_picture\": \"\",\n    \"confirmPassword\": \"{{adminPassword}}\",\n    \"name\": \"test\",\n    \"password\": \"{{adminPassword}}\",\n    \"phone\": \"09007860133\",\n    \"username\": \"{{adminEmail}}\",\n    \"roles\": [1]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseurl}}/auth/signup",
							"host": [
								"{{baseurl}}"
							],
							"path": [
								"auth",
								"signup"
							]
						}
					},
					"response": []
				},
				{
					"name": "ADMIN SIGN IN",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "510b8f3f-c2f0-4bdc-a8f4-4dd11647cb25",
								"exec": [
									"response_data = JSON.parse(responseBody);",
									"token = response_data.data.token",
									"pm.environment.set(\"adminToken\", token);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\"username\": \"{{adminEmail}}\", \"password\": \"{{adminPassword}}\", \"role_id\": [1, 9, 15, 7, 17]}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseurl}}/auth/signin",
							"host": [
								"{{baseurl}}"
							],
							"path": [
								"auth",
								"signin"
							]
						}
					},
					"response": []
				},
				{
					"name": "CREATE COMPANY",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "672cf6b1-610f-45bf-b078-71d613411b3e",
								"exec": [
									"response_data = JSON.parse(responseBody);",
									"companyId = response_data.data.id",
									"",
									"pm.environment.set(\"companyId\", companyId);",
									"pm.environment.set(\"count\", 1);",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "{{adminToken}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"name\": \"{{$randomCatchPhrase}}\", \n    \"code\":\"{{$randomCatchPhrase}}\"\n}"
						},
						"url": {
							"raw": "{{baseurl}}/company",
							"host": [
								"{{baseurl}}"
							],
							"path": [
								"company"
							]
						},
						"description": "create company"
					},
					"response": []
				},
				{
					"name": "CREATE LOCATION",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "ae0cf898-2e53-4ec7-a35c-60aa3dcdab6c",
								"exec": [
									"companyName = pm.variables.replaceIn('{{$randomCompanyName}}')",
									"pm.environment.set(\"companyName\", companyName);",
									"",
									"",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "40cba883-067b-4f26-a812-5dd7b96d9b6a",
								"exec": [
									"responseBody = JSON.parse(responseBody);",
									"pm.environment.set(\"locationId\", responseBody.data.location.id);",
									"",
									"",
									"pm.test(\"verify company name returned in the response is equal to the one given in the request\", function () {",
									"    pm.expect(responseBody.data.location.name).to.eql(pm.environment.get(\"companyName\"))",
									"});",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "{{adminToken}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"name\": \"{{companyName}}\",\n\t\"company_id\": \"{{companyId}}\",\n\t\"business_unit_id\": \"{{buisnessUnitId}}\"\n}"
						},
						"url": {
							"raw": "{{baseurl}}/location",
							"host": [
								"{{baseurl}}"
							],
							"path": [
								"location"
							]
						}
					},
					"response": []
				},
				{
					"name": "CREATE BUSINESS UNIT",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "9c7fec9b-9f49-4cef-8d3d-b699ae0dfdfb",
								"exec": [
									"adminEmail = pm.variables.replaceIn('{{$randomAdjective}}')",
									"",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "8f7b0595-b992-429f-a549-9c7cb9554a05",
								"exec": [
									"responseBody = JSON.parse(responseBody)",
									"buisnessUnitId = responseBody.data.unit.id",
									"pm.environment.set(\"buisnessUnitId\", buisnessUnitId);",
									"",
									"var currentCount = pm.environment.get(\"count\")",
									"if (currentCount > 0){",
									" currentCount = currentCount -1 ;",
									" pm.environment.set(\"count\", currentCount);",
									" postman.setNextRequest(\"CREATE BUSINESS UNIT\");",
									"}",
									"",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(201);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "{{adminToken}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"name\": \"{{$randomLastName}}\",\n\t\"company_id\": {{companyId}}\n}"
						},
						"url": {
							"raw": "{{baseurl}}/businessUnit",
							"host": [
								"{{baseurl}}"
							],
							"path": [
								"businessUnit"
							]
						}
					},
					"response": []
				},
				{
					"name": "CREATE PRODUCT CATEGORY ( SUB CAT INCLUDED )",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2aba2888-f579-4906-9b19-6e6f98596a8a",
								"exec": [
									"responseBody = JSON.parse(responseBody)",
									"pm.environment.set(\"categoryId\", responseBody.data.id);",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "{{adminToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"{{$randomAdjective}}\",\n    \"priority\": 1,\n    \"start_date\": \"2020-06-06T19:36:14\",\n    \"end_date\": \"2020-06-06T19:36:14\",\n    \"location_id\": {{locationId}},\n    \"sub_categories\": [\n        {\n            \"name\": \"chips\",\n            \"location_id\": {{locationId}},\n            \"priority\": 1,\n            \"start_date\": \"2020-06-06T19:36:14\",\n            \"end_date\": \"2020-06-06T19:36:14\"\n        },\n        {\n            \"name\": \"biscuits\",\n            \"priority\": 2,\n            \"location_id\": {{locationId}},\n            \"start_date\": \"2020-06-06T19:36:14\",\n            \"end_date\": \"2020-06-06T19:36:14\"\n        }\n    ]\n}"
						},
						"url": {
							"raw": "{{baseurl}}/categories/createProductCategory",
							"host": [
								"{{baseurl}}"
							],
							"path": [
								"categories",
								"createProductCategory"
							]
						}
					},
					"response": []
				},
				{
					"name": "CREATE PRODUCT",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "{{adminToken}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"sku\": \"{{$randomLoremWord}}\",\n    \"name\": \"gala\",\n    \"size\": \"small\",\n    \"unit\": \"pack\",\n    \"stock_quantity\": 100,\n    \"category_id\": [{{categoryId}}],\n    \"brand\": \"LU\",\n    \"urdu_name\": \"test\",\n    \"urdu_unit\": \"kg\",\n    \"urdu_size\": \"small\",\n    \"urdu_brand\": \"test\",\n    \"disabled\": false,\n    \"barcode\": \"test\",\n    \"description\": \"egg biscuits\",\n    \"consent_required\": false,\n    \"location_id\": {{locationId}},\n    \"price\": 20,\n    \"tax_percent\": 0.5,\n    \"tax_inclusive\": false\n}"
						},
						"url": {
							"raw": "{{baseurl}}/product/createProduct",
							"host": [
								"{{baseurl}}"
							],
							"path": [
								"product",
								"createProduct"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "customer_flow",
			"item": [
				{
					"name": "SIGN_IN",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "84aa912d-fc66-41b6-b244-94e47609eabb",
								"exec": [
									"response_data = JSON.parse(responseBody);",
									"token = response_data.data.token",
									"pm.environment.set(\"token\", token);",
									"",
									"",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"phone\": \"923104613646\",\n    \"password\": \"hyprConsumerSignIn\",\n    \"company_code\" : \"MARK\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseurl}}/auth/signinCustomer",
							"host": [
								"{{baseurl}}"
							],
							"path": [
								"auth",
								"signinCustomer"
							]
						}
					},
					"response": []
				},
				{
					"name": "CREATE CART",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "61277b30-bfee-4025-99ab-744eb73a49db",
								"exec": [
									"response_data = JSON.parse(responseBody);",
									"cart_id = response_data.data.result.id",
									"",
									"pm.environment.set(\"cart_id\", cart_id);",
									"",
									"pm.test(\"cart items array is empty\", function () {",
									"    pm.expect(response_data.data.result.cartItems.length).to.eql(0)",
									"});",
									"",
									"pm.test(\"validate message\", function () {",
									"    pm.expect(response_data.message).to.eql(\"Operation is successfully executed\")",
									"});",
									"",
									"pm.test(\"validate user message\", function () {",
									"    pm.expect(response_data.userMessage).to.eql(\"Your request has been processed successfully\")",
									"});",
									"",
									"",
									"",
									"pm.test(\"total price is 0\", function () {",
									"    pm.expect(response_data.data.result.total_price).to.eql(0)",
									"});",
									"",
									"pm.test(\"sub total is 0\", function () {",
									"    pm.expect(response_data.data.result.sub_total).to.eql(0)",
									"});",
									"",
									"pm.test(\"coupon has not been applied\", function () {",
									"    pm.expect(response_data.data.result.is_coupon).to.eql(0)",
									"});",
									"",
									"",
									"pm.test(\"coupon discount is 0\", function () {",
									"    pm.expect(response_data.data.result.coupon_discount).to.eql(0)",
									"});",
									"",
									"",
									"pm.test(\"value of success key is true\", function () {",
									"    pm.expect(response_data.success).to.eql(true)",
									"});",
									"",
									"",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"location_id\": 11,\n\t\"cartItems\": [{\n\t\t\"product_sku\": 987654321,\n\t\t\"quantity\": 1\n\t}]\n}",
							"options": {
								"raw": {}
							}
						},
						"url": {
							"raw": "{{baseurl}}/order/createCart",
							"host": [
								"{{baseurl}}"
							],
							"path": [
								"order",
								"createCart"
							]
						}
					},
					"response": []
				},
				{
					"name": "UPDATE CART",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f7bc092a-c54a-4164-8096-188fb4fae42f",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"cartId\": \"{{cart_id}}\",\n\t\"cartItems\": [{\n\t\t\"product_sku\": 987654321,\n\t\t\"quantity\": 2\n\t}, {\n\t\t\n\t\t\"product_sku\": \"gala\",\n\t\t\"quantity\": 2\n\t\n\t}]\n}",
							"options": {
								"raw": {}
							}
						},
						"url": {
							"raw": "{{baseurl}}/order/updateOrderFromCart",
							"host": [
								"{{baseurl}}"
							],
							"path": [
								"order",
								"updateOrderFromCart"
							]
						}
					},
					"response": []
				},
				{
					"name": "RESERVE CART",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "e42c06b0-f9d2-49f0-8088-c2246ac739ba",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"cartId\": \"{{cart_id}}\"\n}"
						},
						"url": {
							"raw": "{{baseurl}}/order/reservedQuantityByCart",
							"host": [
								"{{baseurl}}"
							],
							"path": [
								"order",
								"reservedQuantityByCart"
							]
						}
					},
					"response": []
				},
				{
					"name": "CREATE ORDER",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "14db29da-cc59-4934-b4fe-441ba42cf683",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"customerData\": {\n        \"customer_reference\": \"923364054186\",\n        \"customer_reference_type\": \"phone\",\n        \"address\": \"xyz\",\n        \"address_line_1\": \"xyz\",\n        \"address_line_2\": \"xyz\",\n        \"city\": \"Lahore\",\n        \"name\": \"sara\",\n        \"location_cordinates\": {\"latitude\": 90.900, \"longitude\": 90.9000}, \n        \"phone\": \"923364054186\"\n    },\n    \"location_id\": 1,\n    \"cart_id\": \"{{cart_id}}\",\n    \"payment_type\": \"COD\",\n    \"deliveryTime\": \"2020-04-01T12:02:00\"\n}"
						},
						"url": {
							"raw": "{{baseurl}}/order/placeOrderFromCart",
							"host": [
								"{{baseurl}}"
							],
							"path": [
								"order",
								"placeOrderFromCart"
							]
						}
					},
					"response": []
				},
				{
					"name": "FETCH ALL CATEGORIES",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "1a623e04-1905-44be-a649-37a03e5b9c44",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "{{token}}"
							}
						],
						"url": {
							"raw": "{{baseurl}}/categories/getAllCategories?location_id=1&page=1&per_page=10",
							"host": [
								"{{baseurl}}"
							],
							"path": [
								"categories",
								"getAllCategories"
							],
							"query": [
								{
									"key": "location_id",
									"value": "1"
								},
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "per_page",
									"value": "10"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "GET PRODUCTS BY CATEGORY",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "87913d24-9154-4e28-94a2-00de7a70216e",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{token}}"
							}
						],
						"url": {
							"raw": "{{baseurl}}/product/getProductByCategory?per_page=10&category_id=2239&page=1",
							"host": [
								"{{baseurl}}"
							],
							"path": [
								"product",
								"getProductByCategory"
							],
							"query": [
								{
									"key": "per_page",
									"value": "10"
								},
								{
									"key": "category_id",
									"value": "2239"
								},
								{
									"key": "page",
									"value": "1"
								}
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "7e9ba656-4883-44c0-902e-44b6d82e8a55",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "b1e365b5-a9a3-40a7-81d9-16562d88e5ea",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"protocolProfileBehavior": {}
}